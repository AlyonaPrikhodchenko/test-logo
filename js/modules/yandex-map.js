import{getData}from"./api.js";import{mediaQueries}from"./open-burger.js";let myMap;const coordsDefault={lat:"60.03311250396163",lng:"30.42866049999992"},initMap=()=>{const e=document.querySelector("#address"),t=document.querySelector("#contacts-button");myMap=new ymaps.Map("map",{center:[coordsDefault.lat,coordsDefault.lng],zoom:7});const o=document.querySelector(".map__wrapper"),a=o.querySelectorAll(".ymaps-2-1-79-map"),n=e=>{window.addEventListener("resize",(()=>{if(e.matches){let e=document.body.clientWidth/9,t=document.body.clientWidth-e;console.log(t);for(let e of a)e.style.width=`${t}px`}else for(let e of a)e.style.width=`${o.clientWidth}px`}))};n(mediaQueries),mediaQueries.addEventListener("change",n);const r=async e=>{myMap.geoObjects.removeAll();const t=(e=>{for(let t of e){const e=t.GeoObject.Point.pos.split(" ");return[e[1],e[0]]}})((await getData(e)).response.GeoObjectCollection.featureMember);myMap.setCenter(t),myMap.setZoom(7),(e=>{let t=new ymaps.Placemark(e,{},{iconLayout:"default#image",iconImageHref:"./img/icons/map-pin.svg",iconImageSize:[27,39],iconImageOffset:[-10,-39],draggable:!0});myMap.geoObjects.add(t)})(t)};e.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),r(e.target))})),t.addEventListener("click",(async()=>{r(e)}))};export{initMap,myMap,coordsDefault};