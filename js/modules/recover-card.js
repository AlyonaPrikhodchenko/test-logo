import{formatNumber}from"./util.js";const recoverTemplate=document.querySelector("#recover").content.querySelector(".card__recover"),restoresCard=()=>{let t=document.querySelector("#products-price"),e=document.querySelector("#products-count");const r=document.querySelector(".products__list"),a=Array.from(r.children);a&&a.forEach((r=>{const a=recoverTemplate.cloneNode(!0);let o=a.querySelector("#card-name"),c=r.querySelector(".card__title"),d=r.querySelector(".card__delete"),s=r.querySelector(".card__content"),u=a.querySelector(".card__recover-button"),l=a.querySelector(".card__recover-delete"),m=r.querySelector(".card__result-quantity-value"),n=document.querySelector("#total-price-items"),i=document.querySelector("#price-stocks"),p=document.querySelector("#price-discounts"),b=document.querySelector("#price-promo"),N=document.querySelector("#total-price"),S=document.querySelector("#price-delivery");d&&d.addEventListener("click",(()=>{r.removeChild(s),e.dataset.count=Number(e.dataset.count)-Number(m.value),e.textContent=e.dataset.count,t.dataset.productsPrice=Number(t.dataset.productsPrice)-Number(m.dataset.totalPriceOld),t.textContent=formatNumber(t.dataset.productsPrice),n.dataset.total=Number(n.dataset.total)-Number(m.dataset.totalPriceOld),n.textContent=formatNumber(n.dataset.total),i.dataset.priceStocks=Number(i.dataset.priceStocks)-(Number(m.dataset.totalPriceOld)-Number(m.dataset.totalPrice)),i.textContent=formatNumber(i.dataset.priceStocks),p.dataset.priceDiscounts=Number(i.dataset.priceStocks)+Number(b.dataset.pricePromo),p.textContent=formatNumber(p.dataset.priceDiscounts),N.dataset.priceTotalAll=Number(n.dataset.total)+Number(S.dataset.priceDelivery)-Number(p.dataset.priceDiscounts),N.textContent=formatNumber(N.dataset.priceTotalAll),o.textContent=o?c.textContent:"Наименование товара",r.appendChild(a)})),u&&u.addEventListener("click",(()=>{r.appendChild(s),r.removeChild(a),e.dataset.count=Number(e.dataset.count)+Number(m.value),e.textContent=e.dataset.count,t.dataset.productsPrice=Number(t.dataset.productsPrice)+Number(m.dataset.totalPriceOld),t.textContent=formatNumber(t.dataset.productsPrice),i.dataset.priceStocks=Number(i.dataset.priceStocks)+(Number(m.dataset.totalPriceOld)-Number(m.dataset.totalPrice)),i.textContent=formatNumber(i.dataset.priceStocks),p.dataset.priceDiscounts=Number(i.dataset.priceStocks)+Number(b.dataset.pricePromo),p.textContent=formatNumber(p.dataset.priceDiscounts),n.dataset.total=Number(n.dataset.total)+Number(m.dataset.totalPriceOld),n.textContent=formatNumber(n.dataset.total),N.dataset.priceTotalAll=Number(n.dataset.total)+Number(S.dataset.priceDelivery)-Number(p.dataset.priceDiscounts),N.textContent=formatNumber(N.dataset.priceTotalAll)})),l&&l.addEventListener("click",(()=>{r.remove()}))}))};export{restoresCard};