import{formatNumber}from"./util.js";const recoverTemplate=document.querySelector("#recover").content.querySelector(".card__recover"),restoresCard=()=>{let t=document.querySelector("#products-price"),e=document.querySelector("#products-count");const r=document.querySelector(".products__list"),a=(document.querySelector(".products__legend"),Array.from(r.children));a&&a.forEach((r=>{const a=recoverTemplate.cloneNode(!0);let o=a.querySelector("#card-name"),c=r.querySelector(".card__title"),d=r.querySelector(".card__delete"),s=r.querySelector(".card__content"),u=a.querySelector(".card__recover-button"),l=a.querySelector(".card__recover-delete"),i=r.querySelector(".card__result-quantity-value"),n=document.querySelector("#total-price-items"),m=document.querySelector("#price-stocks"),p=document.querySelector("#price-discounts"),b=document.querySelector("#price-promo"),N=document.querySelector("#total-price"),y=document.querySelector("#price-delivery");d&&d.addEventListener("click",(()=>{r.removeChild(s),e.dataset.count=Number(e.dataset.count)-Number(i.value),e.textContent=e.dataset.count,"0"===e.dataset.count?(y.dataset.priceDelivery="0",y.textContent=formatNumber(y.dataset.priceDelivery)):(y.dataset.priceDelivery="200",y.textContent=formatNumber(y.dataset.priceDelivery)),t.dataset.productsPrice=Number(t.dataset.productsPrice)-Number(i.dataset.totalPriceOld),t.textContent=formatNumber(t.dataset.productsPrice),n.dataset.total=Number(n.dataset.total)-Number(i.dataset.totalPriceOld),n.textContent=formatNumber(n.dataset.total),m.dataset.priceStocks=Number(m.dataset.priceStocks)-(Number(i.dataset.totalPriceOld)-Number(i.dataset.totalPrice)),m.textContent=formatNumber(m.dataset.priceStocks),p.dataset.priceDiscounts=Number(m.dataset.priceStocks)+Number(b.dataset.pricePromo),p.textContent=formatNumber(p.dataset.priceDiscounts),N.dataset.priceTotalAll=Number(n.dataset.total)+Number(y.dataset.priceDelivery)-Number(p.dataset.priceDiscounts),N.textContent=formatNumber(N.dataset.priceTotalAll),o.textContent=o?c.textContent:"Наименование товара",r.appendChild(a)})),u&&u.addEventListener("click",(()=>{r.appendChild(s),r.removeChild(a),e.dataset.count=Number(e.dataset.count)+Number(i.value),e.textContent=e.dataset.count,"0"===e.dataset.count?(y.dataset.priceDelivery="0",y.textContent=formatNumber(y.dataset.priceDelivery)):(y.dataset.priceDelivery="200",y.textContent=formatNumber(y.dataset.priceDelivery)),t.dataset.productsPrice=Number(t.dataset.productsPrice)+Number(i.dataset.totalPriceOld),t.textContent=formatNumber(t.dataset.productsPrice),m.dataset.priceStocks=Number(m.dataset.priceStocks)+(Number(i.dataset.totalPriceOld)-Number(i.dataset.totalPrice)),m.textContent=formatNumber(m.dataset.priceStocks),p.dataset.priceDiscounts=Number(m.dataset.priceStocks)+Number(b.dataset.pricePromo),p.textContent=formatNumber(p.dataset.priceDiscounts),n.dataset.total=Number(n.dataset.total)+Number(i.dataset.totalPriceOld),n.textContent=formatNumber(n.dataset.total),N.dataset.priceTotalAll=Number(n.dataset.total)+Number(y.dataset.priceDelivery)-Number(p.dataset.priceDiscounts),N.textContent=formatNumber(N.dataset.priceTotalAll)})),l&&l.addEventListener("click",(()=>{r.remove()}))}))};export{restoresCard};