import{changesTitle,formatNumber}from"./util.js";const getItemPrice=t=>t.value*t.dataset.oldPrice,initCounter=()=>{const t=document.querySelectorAll("[data-counters]");if(t){let e=0,a=0,r=0,o=document.querySelector("#total-price-items"),c=document.querySelector("#total-price"),s=document.querySelector("#price-delivery"),d=document.querySelector("#price-stocks"),u=document.querySelector("#price-discounts"),i=document.querySelector("#price-promo"),l=document.querySelector("#products-price"),m=document.querySelector("#products-count");t.forEach((t=>{const n=t.querySelector(".card__result-button--plus"),b=t.querySelector(".card__result-button--minus");let p=t.querySelector("[data-text-new]"),N=t.querySelector("[data-text-old]"),P=t.querySelector(".card__result-quantity-value");const S=()=>{P.dataset.totalPrice=P.value*P.dataset.price,P.dataset.totalPriceOld=P.value*P.dataset.oldPrice},y=()=>{c.dataset.priceTotalAll=Number(o.dataset.total)+Number(s.dataset.priceDelivery)-Number(u.dataset.priceDiscounts),c.textContent=formatNumber(c.dataset.priceTotalAll)},f=()=>{u.dataset.priceDiscounts=Number(d.dataset.priceStocks)+Number(i.dataset.pricePromo),u.textContent=formatNumber(u.dataset.priceDiscounts)},x=()=>N.textContent=formatNumber(P.dataset.totalPriceOld),q=()=>p.textContent=formatNumber(P.dataset.totalPrice),C=()=>{P.value<=1?(P.value=1,b.disabled=!0):b.disabled=!1};t&&(C(),n.addEventListener("click",(()=>{P.value++,S(),d.dataset.priceStocks=Number(d.dataset.priceStocks)+Number(P.dataset.oldPrice)-Number(P.dataset.price),d.textContent=formatNumber(d.dataset.priceStocks),N&&x(),q(),o.dataset.total=Number(o.dataset.total)+Number(P.dataset.oldPrice),o.textContent=formatNumber(o.dataset.total),f(),y(),m.dataset.count=Number(m.dataset.count)+1,l.dataset.productsPrice=Number(l.dataset.productsPrice)+Number(P.dataset.oldPrice),changesTitle(m.dataset.count,l.dataset.productsPrice),C()})),b.addEventListener("click",(()=>{P.value--,S(),d.dataset.priceStocks=Number(d.dataset.priceStocks)-(Number(P.dataset.oldPrice)-Number(P.dataset.price)),d.textContent=formatNumber(d.dataset.priceStocks),N&&x(),q(),o.dataset.total=Number(o.dataset.total)-Number(P.dataset.oldPrice),o.textContent=formatNumber(o.dataset.total),f(),y(),m.dataset.count=Number(m.dataset.count)-1,l.dataset.productsPrice=Number(l.dataset.productsPrice)-Number(P.dataset.oldPrice),changesTitle(m.dataset.count,l.dataset.productsPrice),C()})),p.textContent=formatNumber(P.dataset.totalPrice),e+=getItemPrice(P),r+=Number(P.value),a+=Number(P.dataset.totalPriceOld)-Number(P.dataset.totalPrice))})),o.dataset.total=e,o.textContent=formatNumber(o.dataset.total),c.dataset.priceTotalAll=Number(o.dataset.total)+Number(s.dataset.priceDelivery)-Number(u.dataset.priceDiscounts),c.textContent=formatNumber(c.dataset.priceTotalAll),d.dataset.priceStocks=a,d.textContent=a,u.dataset.priceDiscounts=Number(d.dataset.priceStocks)+Number(i.dataset.pricePromo),u.textContent=formatNumber(u.dataset.priceDiscounts)}};export{initCounter};