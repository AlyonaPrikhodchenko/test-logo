import{formatNumber}from"./util.js";const getItemPrice=t=>t.value*t.dataset.oldPrice,initCounter=()=>{const t=document.querySelectorAll("[data-counters");if(t){let e=0,a=0,r=0,o=document.querySelector("#total-price-items"),c=document.querySelector("#total-price"),u=document.querySelector("#price-delivery"),s=document.querySelector("#price-stocks"),d=document.querySelector("#price-discounts"),l=document.querySelector("#price-promo"),i=document.querySelector("#products-price"),n=document.querySelector("#products-count");t.forEach((t=>{const m=t.querySelector(".card__result-button--plus"),b=t.querySelector(".card__result-button--minus");let p=t.querySelector("[data-text-new]"),N=t.querySelector("[data-text-old]"),P=t.querySelector(".card__result-quantity-value");const x=()=>{P.dataset.totalPrice=P.value*P.dataset.price,P.dataset.totalPriceOld=P.value*P.dataset.oldPrice},C=()=>{s.dataset.priceStocks=Number(P.dataset.totalPriceOld)-Number(P.dataset.totalPrice),s.textContent=formatNumber(s.dataset.priceStocks)},S=()=>{c.dataset.priceTotalAll=Number(o.dataset.total)+Number(u.dataset.priceDelivery)-Number(d.dataset.priceDiscounts),c.textContent=formatNumber(c.dataset.priceTotalAll)},f=()=>{d.dataset.priceDiscounts=Number(s.dataset.priceStocks)+Number(l.dataset.pricePromo),d.textContent=formatNumber(d.dataset.priceDiscounts)},y=()=>N.textContent=formatNumber(P.dataset.totalPriceOld),q=()=>p.textContent=formatNumber(P.dataset.totalPrice),v=()=>{P.value<=1?(P.value=1,b.disabled=!0):b.disabled=!1};t&&(v(),m.addEventListener("click",(()=>{P.value++,x(),N&&(y(),C()),q(),o.dataset.total=Number(o.dataset.total)+Number(P.dataset.oldPrice),o.textContent=formatNumber(o.dataset.total),f(),S(),n.dataset.count=Number(n.dataset.count)+1,n.textContent=n.dataset.count,i.dataset.productsPrice=Number(i.dataset.productsPrice)+Number(P.dataset.oldPrice),i.textContent=formatNumber(i.dataset.productsPrice),v()})),b.addEventListener("click",(()=>{P.value--,x(),N&&(y(),C()),q(),o.dataset.total=Number(o.dataset.total)-Number(P.dataset.oldPrice),o.textContent=formatNumber(o.dataset.total),f(),S(),n.dataset.count=Number(n.dataset.count)-1,n.textContent=n.dataset.count,i.dataset.productsPrice=Number(i.dataset.productsPrice)-Number(P.dataset.oldPrice),i.textContent=formatNumber(i.dataset.productsPrice),v()})),p.textContent=formatNumber(P.dataset.totalPrice),e+=getItemPrice(P),r+=Number(P.value),a+=Number(P.dataset.totalPriceOld)-Number(P.dataset.totalPrice))})),o.dataset.total=e,o.textContent=formatNumber(o.dataset.total),c.dataset.priceTotalAll=Number(o.dataset.total)+Number(u.dataset.priceDelivery)-Number(d.dataset.priceDiscounts),c.textContent=formatNumber(c.dataset.priceTotalAll),s.dataset.priceStocks=a,s.textContent=formatNumber(s.dataset.priceStocks),d.dataset.priceDiscounts=Number(s.dataset.priceStocks)+Number(l.dataset.pricePromo),d.textContent=formatNumber(d.dataset.priceDiscounts),n.dataset.count=r,n.textContent=r,i.dataset.productsPrice=e,i.textContent=formatNumber(i.dataset.productsPrice)}};export{initCounter};