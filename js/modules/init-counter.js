import{changesTitle,formatNumber,getItemPrice,priceDelivery,priceDiscounts,pricePromo,priceStocks,productsCounts,productsPrice,totalPrice,totalPriceAll}from"./util.js";const initCounter=()=>{const t=document.querySelectorAll("[data-counters]");if(t){let e=0,r=0;t.forEach((t=>{const a=t.querySelector(".card__result-button--plus"),c=t.querySelector(".card__result-button--minus"),o=t.querySelector("[data-text-new]"),s=t.querySelector("[data-text-old]"),i=t.querySelector(".card__result-quantity-value"),u=()=>{i.dataset.totalPrice=i.value*i.dataset.price,i.dataset.totalPriceOld=i.value*i.dataset.oldPrice},d=()=>{totalPriceAll.dataset.priceTotalAll=Number(totalPrice.dataset.total)+Number(priceDelivery.dataset.priceDelivery)-Number(priceDiscounts.dataset.priceDiscounts),totalPriceAll.textContent=formatNumber(totalPriceAll.dataset.priceTotalAll)},l=()=>{priceDiscounts.dataset.priceDiscounts=Number(priceStocks.dataset.priceStocks)+Number(pricePromo.dataset.pricePromo),priceDiscounts.textContent=formatNumber(priceDiscounts.dataset.priceDiscounts)},p=()=>s.textContent=formatNumber(i.dataset.totalPriceOld),n=()=>o.textContent=formatNumber(i.dataset.totalPrice),m=()=>{i.value<=1?(i.value=1,c.disabled=!0):c.disabled=!1};t&&(m(),a.addEventListener("click",(()=>{i.value++,u(),priceStocks.dataset.priceStocks=Number(priceStocks.dataset.priceStocks)+Number(i.dataset.oldPrice)-Number(i.dataset.price),priceStocks.textContent=formatNumber(priceStocks.dataset.priceStocks),s&&p(),n(),totalPrice.dataset.total=Number(totalPrice.dataset.total)+Number(i.dataset.oldPrice),totalPrice.textContent=formatNumber(totalPrice.dataset.total),l(),d(),productsCounts.dataset.count=Number(productsCounts.dataset.count)+1,productsPrice.dataset.productsPrice=Number(productsPrice.dataset.productsPrice)+Number(i.dataset.oldPrice),changesTitle(productsCounts.dataset.count,productsPrice.dataset.productsPrice),m()})),c.addEventListener("click",(()=>{i.value--,u(),priceStocks.dataset.priceStocks=Number(priceStocks.dataset.priceStocks)-(Number(i.dataset.oldPrice)-Number(i.dataset.price)),priceStocks.textContent=formatNumber(priceStocks.dataset.priceStocks),s&&p(),n(),totalPrice.dataset.total=Number(totalPrice.dataset.total)-Number(i.dataset.oldPrice),totalPrice.textContent=formatNumber(totalPrice.dataset.total),l(),d(),productsCounts.dataset.count=Number(productsCounts.dataset.count)-1,productsPrice.dataset.productsPrice=Number(productsPrice.dataset.productsPrice)-Number(i.dataset.oldPrice),changesTitle(productsCounts.dataset.count,productsPrice.dataset.productsPrice),m()})),o.textContent=formatNumber(i.dataset.totalPrice),e+=getItemPrice(i),r+=Number(i.dataset.totalPriceOld)-Number(i.dataset.totalPrice))})),totalPrice.dataset.total=e,totalPrice.textContent=formatNumber(totalPrice.dataset.total),totalPriceAll.dataset.priceTotalAll=Number(totalPrice.dataset.total)+Number(priceDelivery.dataset.priceDelivery)-Number(priceDiscounts.dataset.priceDiscounts),totalPriceAll.textContent=formatNumber(totalPriceAll.dataset.priceTotalAll),priceStocks.dataset.priceStocks=r,priceStocks.textContent=r,priceDiscounts.dataset.priceDiscounts=Number(priceStocks.dataset.priceStocks)+Number(pricePromo.dataset.pricePromo),priceDiscounts.textContent=formatNumber(priceDiscounts.dataset.priceDiscounts)}};export{initCounter};