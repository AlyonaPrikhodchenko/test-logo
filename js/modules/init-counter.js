import{formatNumber}from"./util.js";const getItemPrice=t=>t.value*t.dataset.price,initCounter=()=>{const t=document.querySelectorAll("[data-counters");if(t){let e=0,r=0,n=document.querySelector("#total-price-items"),o=document.querySelector("#total-price"),u=document.querySelector("#price-delivery"),a=document.querySelector("#products-price"),c=document.querySelector("#products-count");t.forEach((t=>{if(t){const l=t.querySelector(".card__result-button--plus"),d=t.querySelector(".card__result-button--minus");let i=t.querySelector("[data-total-price]"),m=t.querySelector("[data-total-price-old]"),s=t.querySelector(".card__result-quantity-value");s.value<=1&&(s.value=1,d.disabled=!0),l.addEventListener("click",(()=>{s.value++,i.textContent=formatNumber(s.value*s.dataset.price),n.textContent=Number(n.textContent)+Number(s.dataset.price),a.textContent=Number(a.textContent)+Number(s.dataset.price),c.textContent=Number(c.textContent)+1,o.textContent=Number(n.textContent)+Number(u.textContent),s.dataset.oldPrice&&(m.textContent=formatNumber(s.value*s.dataset.oldPrice)),s.value>1&&(d.disabled=!1)})),d.addEventListener("click",(()=>{s.value--,i.textContent=formatNumber(s.value*s.dataset.price),n.textContent=Number(n.textContent)-Number(s.dataset.price),a.textContent=Number(a.textContent)-Number(s.dataset.price),c.textContent=Number(c.textContent)-1,o.textContent=n.textContent,o.textContent=Number(n.textContent)+Number(u.textContent),s.dataset.oldPrice&&(m.textContent=formatNumber(s.value*s.dataset.oldPrice)),s.value<=1&&(s.value=1,d.disabled=!0)})),e+=getItemPrice(s),r+=Number(s.value)}})),n.textContent=e,a.textContent=e,c.textContent=r}};export{initCounter};