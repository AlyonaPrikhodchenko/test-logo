import{formatNumber}from"./util.js";const getItemPrice=t=>t.value*t.dataset.oldPrice,initCounter=()=>{const t=document.querySelectorAll("[data-counters");if(t){let e=0,a=0,r=0,o=document.querySelector("#total-price-items"),c=document.querySelector("#total-price"),s=document.querySelector("#price-delivery"),d=document.querySelector("#price-stocks"),u=document.querySelector("#price-discounts"),l=document.querySelector("#price-promo"),i=document.querySelector("#products-price"),m=document.querySelector("#products-count");t.forEach((t=>{const n=t.querySelector(".card__result-button--plus"),b=t.querySelector(".card__result-button--minus");let N=t.querySelector("[data-text-new]"),p=t.querySelector("[data-text-old]"),P=t.querySelector(".card__result-quantity-value");t&&(P.value<=1&&(P.value=1,b.disabled=!0),N.textContent=formatNumber(P.dataset.totalPrice),n.addEventListener("click",(()=>{P.value++,P.dataset.totalPrice=P.value*P.dataset.price,P.dataset.totalPriceOld&&p&&(P.dataset.totalPriceOld=P.value*P.dataset.oldPrice,p.textContent=formatNumber(P.dataset.totalPriceOld),d.dataset.priceStocks=Number(P.dataset.totalPriceOld)-Number(P.dataset.totalPrice),d.textContent=formatNumber(d.dataset.priceStocks)),N.textContent=formatNumber(P.dataset.totalPrice),o.dataset.total=Number(o.dataset.total)+Number(P.dataset.oldPrice),o.textContent=formatNumber(o.dataset.total),c.dataset.priceTotalAll=Number(o.dataset.total)+Number(s.dataset.priceDelivery)-Number(u.dataset.priceDiscounts),c.textContent=formatNumber(c.dataset.priceTotalAll),u.dataset.priceDiscounts=Number(d.dataset.priceStocks)+Number(l.dataset.pricePromo),u.textContent=formatNumber(u.dataset.priceDiscounts),m.dataset.count=Number(m.dataset.count)+1,m.textContent=m.dataset.count,i.dataset.productsPrice=Number(i.dataset.productsPrice)+Number(P.dataset.oldPrice),i.textContent=formatNumber(i.dataset.productsPrice),P.value>1&&(b.disabled=!1)})),b.addEventListener("click",(()=>{P.value--,P.dataset.totalPrice=P.value*P.dataset.price,P.dataset.totalPriceOld&&p&&(P.dataset.totalPriceOld=P.value*P.dataset.oldPrice,p.textContent=formatNumber(P.dataset.totalPriceOld),d.dataset.priceStocks=Number(P.dataset.totalPriceOld)-Number(P.dataset.totalPrice),d.textContent=formatNumber(d.dataset.priceStocks)),N.textContent=formatNumber(P.dataset.totalPrice),o.dataset.total=Number(o.dataset.total)-Number(P.dataset.oldPrice),o.textContent=formatNumber(o.dataset.total),c.dataset.priceTotalAll=Number(o.dataset.total)+Number(s.dataset.priceDelivery)-Number(u.dataset.priceDiscounts),c.textContent=formatNumber(c.dataset.priceTotalAll),u.dataset.priceDiscounts=Number(d.dataset.priceStocks)+Number(l.dataset.pricePromo),u.textContent=formatNumber(u.dataset.priceDiscounts),m.dataset.count=Number(m.dataset.count)-1,m.textContent=m.dataset.count,i.dataset.productsPrice=Number(i.dataset.productsPrice)-Number(P.dataset.oldPrice),i.textContent=formatNumber(i.dataset.productsPrice),P.value<=1&&(P.value=1,b.disabled=!0)})),N.textContent=formatNumber(P.dataset.totalPrice),e+=getItemPrice(P),r+=Number(P.value),a+=Number(P.dataset.totalPriceOld)-Number(P.dataset.totalPrice))})),console.log(a),o.dataset.total=e,o.textContent=formatNumber(o.dataset.total),c.dataset.priceTotalAll=Number(o.dataset.total)+Number(s.dataset.priceDelivery)-Number(u.dataset.priceDiscounts),c.textContent=formatNumber(c.dataset.priceTotalAll),d.dataset.priceStocks=a,d.textContent=formatNumber(d.dataset.priceStocks),u.dataset.priceDiscounts=Number(d.dataset.priceStocks)+Number(l.dataset.pricePromo),u.textContent=formatNumber(u.dataset.priceDiscounts),m.dataset.count=r,m.textContent=r,i.dataset.productsPrice=e,i.textContent=formatNumber(i.dataset.productsPrice)}};export{initCounter};